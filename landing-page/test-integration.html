<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Memory Box - Integration Test</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        .section { margin: 20px 0; padding: 15px; border: 1px solid #ddd; border-radius: 8px; }
        .success { background-color: #d4edda; border-color: #c3e6cb; color: #155724; }
        .warning { background-color: #fff3cd; border-color: #ffeaa7; color: #856404; }
        .info { background-color: #d1ecf1; border-color: #bee5eb; color: #0c5460; }
        button { padding: 10px 15px; margin: 5px; background: #007bff; color: white; border: none; border-radius: 4px; cursor: pointer; }
        button:hover { background: #0056b3; }
        pre { background: #f8f9fa; padding: 10px; border-radius: 4px; overflow-x: auto; }
    </style>
</head>
<body>
    <h1>üß™ Memory Box Integration Test Suite</h1>
    
    <div class="section info">
        <h2>üìä Current localStorage Data</h2>
        <button onclick="loadData()">üîÑ Refresh Data</button>
        <button onclick="clearData()">üóëÔ∏è Clear All Data</button>
        <button onclick="addTestData()">‚ûï Add Test Data</button>
        <div id="dataDisplay"></div>
    </div>

    <div class="section info">
        <h2>üéØ Test CMS Integration</h2>
        <input type="text" id="testTitle" placeholder="Test Hero Title" style="width: 300px; padding: 8px; margin: 5px;">
        <br>
        <textarea id="testDescription" placeholder="Test Hero Description" style="width: 300px; height: 60px; padding: 8px; margin: 5px;"></textarea>
        <br>
        <button onclick="updateCMS()">üíæ Update CMS Content</button>
        <button onclick="openLandingPage()">üåê Open Landing Page</button>
    </div>

    <div class="section info">
        <h2>üìà Analytics</h2>
        <div id="analyticsDisplay"></div>
    </div>

    <script>
        function loadData() {
            const users = JSON.parse(localStorage.getItem('memorybox_users') || '[]');
            const cms = JSON.parse(localStorage.getItem('memorybox_cms') || '{}');
            const downloads = JSON.parse(localStorage.getItem('memorybox_downloads') || '[]');
            const pageViews = parseInt(localStorage.getItem('memorybox_pageviews') || '0');
            
            const dataHtml = `
                <h3>üë• Users (${users.length})</h3>
                <pre>${JSON.stringify(users, null, 2)}</pre>
                
                <h3>ÔøΩ Downloads (${downloads.length})</h3>
                <pre>${JSON.stringify(downloads, null, 2)}</pre>
                
                <h3>ÔøΩüìù CMS Content</h3>
                <pre>${JSON.stringify(cms, null, 2)}</pre>
                
                <h3>üëÅÔ∏è Page Views: ${pageViews}</h3>
            `;
            
            document.getElementById('dataDisplay').innerHTML = dataHtml;
            
            // Update analytics
            const analyticsHtml = `
                <p><strong>Total Page Views:</strong> ${pageViews}</p>
                <p><strong>Total Sign-ups:</strong> ${users.length}</p>
                <p><strong>Total Downloads:</strong> ${downloads.length}</p>
                <p><strong>Conversion Rate:</strong> ${pageViews > 0 ? ((users.length / pageViews) * 100).toFixed(2) : 0}%</p>
            `;
            document.getElementById('analyticsDisplay').innerHTML = analyticsHtml;
        }

        function clearData() {
            if (confirm('Are you sure you want to clear all localStorage data?')) {
                localStorage.removeItem('memorybox_users');
                localStorage.removeItem('memorybox_cms');
                localStorage.removeItem('memorybox_downloads');
                localStorage.removeItem('memorybox_pageviews');
                localStorage.removeItem('memorybox_latest_user');
                loadData();
                alert('‚úÖ All data cleared!');
            }
        }
        
        function addTestData() {
            // Add test user
            const testUser = {
                fullName: 'Test User ' + Date.now(),
                email: 'test' + Date.now() + '@example.com',
                userType: 'Website',
                source: 'Test Suite',
                agreedToTerms: true,
                timestamp: new Date().toISOString()
            };
            
            const users = JSON.parse(localStorage.getItem('memorybox_users') || '[]');
            users.push(testUser);
            localStorage.setItem('memorybox_users', JSON.stringify(users));
            
            // Add test download
            const downloads = JSON.parse(localStorage.getItem('memorybox_downloads') || '[]');
            downloads.push({
                platform: Math.random() > 0.5 ? 'app-store' : 'google-play',
                timestamp: new Date().toISOString(),
                userAgent: navigator.userAgent
            });
            localStorage.setItem('memorybox_downloads', JSON.stringify(downloads));
            
            // Increment page views
            const pageViews = parseInt(localStorage.getItem('memorybox_pageviews') || '0') + 1;
            localStorage.setItem('memorybox_pageviews', pageViews.toString());
            
            loadData();
            alert('‚úÖ Test data added!');
        }
        
        function updateCMS() {
            const title = document.getElementById('testTitle').value;
            const description = document.getElementById('testDescription').value;
            
            if (!title && !description) {
                alert('Please enter a title or description to test');
                return;
            }
            
            const cmsData = {
                heroTitle: title || 'Cherish Family Memories Forever',
                heroDescription: description || 'The easiest way to store, organize, and share your family\'s most treasured moments.',
                lastUpdated: new Date().toISOString()
            };
            
            localStorage.setItem('memorybox_cms', JSON.stringify(cmsData));
            loadData();
            alert('‚úÖ CMS content updated! Open the landing page to see changes.');
        }
        
        function openLandingPage() {
            window.open('./index.html', '_blank');
        }
        
        // Load data on page load
        loadData();
    </script>
</body>
</html>
