<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Memory Box Admin Dashboard - Secure management portal for Memory Box platform">
    <meta name="keywords" content="memory box, admin, dashboard, management">
    <meta name="author" content="Memory Box">
    <meta name="robots" content="noindex, nofollow">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:title" content="Memory Box Admin Dashboard">
    <meta property="og:description" content="Secure admin portal for Memory Box platform management">
    
    <!-- Twitter -->
    <meta property="twitter:card" content="summary">
    <meta property="twitter:title" content="Memory Box Admin Dashboard">
    <meta property="twitter:description" content="Secure admin portal for Memory Box platform management">
    
    <title>Memory Box Admin Dashboard</title>
    
    <!-- Preload critical resources -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preconnect" href="https://cdn.tailwindcss.com">
    <link rel="preconnect" href="https://cdn.jsdelivr.net">
    
    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Ctext y='.9em' font-size='90'%3Eüì¶%3C/text%3E%3C/svg%3E">
    
    <!-- PWA Manifest -->
    <link rel="manifest" href="/manifest.json">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="MB Admin">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="msapplication-TileColor" content="#6366F1">
    <meta name="msapplication-tap-highlight" content="no">
    
    <!-- Stylesheets -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    
    <!-- Critical CSS -->
    <style>
        body { 
            font-family: 'Inter', sans-serif; 
            margin: 0;
            padding: 0;
        }
        .sidebar-link.active { 
            background-color: #6366f1; 
            color: white; 
        }
        .loading {
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .spinner {
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        /* Performance optimizations */
        .chart-container {
            will-change: transform;
        }
        .hover-effect:hover {
            transform: translateY(-1px);
            transition: transform 0.2s ease;
        }
        /* PWA styles */
        .install-prompt {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: #6366f1;
            color: white;
            padding: 12px 20px;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            z-index: 1000;
            display: none;
        }
    </style>
</head>
<body class="bg-gray-50">
    <!-- Loading screen -->
    <div id="loading-screen" class="loading">
        <div class="text-center">
            <div class="spinner w-8 h-8 border-4 border-purple-200 border-t-purple-600 rounded-full mx-auto mb-4"></div>
            <p class="text-gray-600">Loading Memory Box Admin...</p>
        </div>
    </div>

    <!-- Main App -->
    <div id="main-app" class="flex h-screen" style="display: none;">
        <!-- Sidebar -->
        <div class="w-64 bg-white shadow-lg">
            <!-- Logo -->
            <div class="flex items-center h-16 px-6 bg-purple-600">
                <div class="w-8 h-8 bg-white rounded-lg flex items-center justify-center mr-3 animated-logo">
                    <span class="text-purple-600 font-bold text-lg">üì¶</span>
                </div>
                <span class="text-white font-bold text-lg">Memory Box</span>
            </div>

            <!-- Navigation -->
            <nav class="mt-6 px-3">
                <a href="#" class="sidebar-link active flex items-center px-4 py-3 text-gray-700 rounded-lg hover:bg-gray-100 transition-colors duration-200 mb-1" onclick="showSection('dashboard')">
                    <span class="mr-3">üè†</span>
                    <span class="font-medium">Dashboard</span>
                </a>
                <a href="#" class="sidebar-link flex items-center px-4 py-3 text-gray-700 rounded-lg hover:bg-gray-100 transition-colors duration-200 mb-1" onclick="showSection('users')">
                    <span class="mr-3">üë•</span>
                    <span class="font-medium">Users</span>
                </a>
                <a href="#" class="sidebar-link flex items-center px-4 py-3 text-gray-700 rounded-lg hover:bg-gray-100 transition-colors duration-200 mb-1" onclick="showSection('subscriptions')">
                    <span class="mr-3">üí≥</span>
                    <span class="font-medium">Subscriptions</span>
                </a>
                <a href="#" class="sidebar-link flex items-center px-4 py-3 text-gray-700 rounded-lg hover:bg-gray-100 transition-colors duration-200 mb-1" onclick="showSection('analytics')">
                    <span class="mr-3">üìä</span>
                    <span class="font-medium">Analytics</span>
                </a>
                <a href="#" class="sidebar-link flex items-center px-4 py-3 text-gray-700 rounded-lg hover:bg-gray-100 transition-colors duration-200 mb-1" onclick="showSection('storage')">
                    <span class="mr-3">üíæ</span>
                    <span class="font-medium">Storage</span>
                </a>
                <a href="#" class="sidebar-link flex items-center px-4 py-3 text-gray-700 rounded-lg hover:bg-gray-100 transition-colors duration-200 mb-1" onclick="showSection('support')">
                    <span class="mr-3">üéß</span>
                    <span class="font-medium">Support</span>
                </a>
                <a href="#" class="sidebar-link flex items-center px-4 py-3 text-gray-700 rounded-lg hover:bg-gray-100 transition-colors duration-200 mb-1" onclick="showSection('settings')">
                    <span class="mr-3">‚öôÔ∏è</span>
                    <span class="font-medium">Settings</span>
                </a>
            </nav>

            <!-- Admin Info -->
            <div class="absolute bottom-0 left-0 right-0 p-4 border-t border-gray-200">
                <div class="flex items-center">
                    <div class="w-8 h-8 bg-purple-100 rounded-full flex items-center justify-center">
                        <span class="text-purple-600 font-medium text-sm">A</span>
                    </div>
                    <div class="ml-3 flex-1">
                        <p class="text-sm font-medium text-gray-700">Admin User</p>
                        <p class="text-xs text-gray-500">Owner</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Main Content -->
        <div class="flex-1 flex flex-col overflow-hidden">
            <!-- Header -->
            <header class="bg-white shadow-sm border-b border-gray-200">
                <div class="flex items-center justify-between px-6 py-4">
                    <h1 class="text-2xl font-bold text-gray-900" id="pageTitle">Dashboard</h1>
                    <div class="flex items-center space-x-4">
                        <div class="relative">
                            <input type="text" placeholder="Search..." class="pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500">
                            <span class="absolute left-3 top-2.5 text-gray-400">üîç</span>
                        </div>
                        <button class="relative p-2 text-gray-600 hover:text-gray-900 rounded-lg hover:bg-gray-100">
                            <span class="text-xl">üîî</span>
                            <span class="absolute top-0 right-0 h-2 w-2 bg-red-500 rounded-full"></span>
                        </button>
                        <div class="w-8 h-8 bg-purple-600 rounded-full flex items-center justify-center">
                            <span class="text-white font-medium text-sm">A</span>
                        </div>
                    </div>
                </div>
            </header>

            <!-- Page Content -->
            <main class="flex-1 overflow-auto p-6">
                <!-- Dashboard Section -->
                <div id="dashboard-section" class="section">
                    <div class="space-y-6">
                        <!-- Key Metrics -->
                        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                            <div class="bg-white rounded-xl shadow-sm border border-gray-100 p-6">
                                <div class="flex items-center justify-between">
                                    <div>
                                        <p class="text-gray-600 text-sm font-medium">Total Users</p>
                                        <p class="text-2xl font-bold text-gray-900 mt-1">12,847</p>
                                        <p class="text-sm text-green-500 mt-2">‚ÜóÔ∏è +12.5% vs last month</p>
                                    </div>
                                    <div class="p-3 bg-blue-50 rounded-lg">
                                        <span class="text-2xl">üë•</span>
                                    </div>
                                </div>
                            </div>

                            <div class="bg-white rounded-xl shadow-sm border border-gray-100 p-6">
                                <div class="flex items-center justify-between">
                                    <div>
                                        <p class="text-gray-600 text-sm font-medium">Monthly Revenue</p>
                                        <p class="text-2xl font-bold text-gray-900 mt-1">$45,678</p>
                                        <p class="text-sm text-green-500 mt-2">‚ÜóÔ∏è +8.2% vs last month</p>
                                    </div>
                                    <div class="p-3 bg-green-50 rounded-lg">
                                        <span class="text-2xl">üí∞</span>
                                    </div>
                                </div>
                            </div>

                            <div class="bg-white rounded-xl shadow-sm border border-gray-100 p-6">
                                <div class="flex items-center justify-between">
                                    <div>
                                        <p class="text-gray-600 text-sm font-medium">Storage Used</p>
                                        <p class="text-2xl font-bold text-gray-900 mt-1">850GB</p>
                                        <p class="text-sm text-orange-500 mt-2">‚ÜóÔ∏è +15.3% vs last month</p>
                                    </div>
                                    <div class="p-3 bg-purple-50 rounded-lg">
                                        <span class="text-2xl">üíæ</span>
                                    </div>
                                </div>
                            </div>

                            <div class="bg-white rounded-xl shadow-sm border border-gray-100 p-6">
                                <div class="flex items-center justify-between">
                                    <div>
                                        <p class="text-gray-600 text-sm font-medium">Support Tickets</p>
                                        <p class="text-2xl font-bold text-gray-900 mt-1">23</p>
                                        <p class="text-sm text-red-500 mt-2">‚ÜòÔ∏è -23.1% vs last month</p>
                                    </div>
                                    <div class="p-3 bg-orange-50 rounded-lg">
                                        <span class="text-2xl">üéß</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Charts -->
                        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                            <div class="bg-white rounded-xl shadow-sm border border-gray-100 p-6">
                                <h3 class="text-lg font-semibold text-gray-900 mb-4">User Growth</h3>
                                <canvas id="userGrowthChart" width="400" height="200"></canvas>
                            </div>
                            
                            <div class="bg-white rounded-xl shadow-sm border border-gray-100 p-6">
                                <h3 class="text-lg font-semibold text-gray-900 mb-4">Revenue Trends</h3>
                                <canvas id="revenueChart" width="400" height="200"></canvas>
                            </div>
                        </div>

                        <!-- Recent Activity -->
                        <div class="bg-white rounded-xl shadow-sm border border-gray-100 p-6">
                            <h3 class="text-lg font-semibold text-gray-900 mb-4">Recent Activity</h3>
                            <div class="space-y-4">
                                <div class="flex items-center p-4 hover:bg-gray-50 rounded-lg">
                                    <div class="w-10 h-10 bg-green-100 rounded-full flex items-center justify-center">
                                        <span class="text-sm">‚¨ÜÔ∏è</span>
                                    </div>
                                    <div class="ml-4 flex-1">
                                        <p class="font-medium text-gray-900">Maria Garcia</p>
                                        <p class="text-sm text-gray-600">Upgraded to Premium</p>
                                    </div>
                                    <span class="text-xs text-gray-500">2 minutes ago</span>
                                </div>
                                
                                <div class="flex items-center p-4 hover:bg-gray-50 rounded-lg">
                                    <div class="w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center">
                                        <span class="text-sm">üìÅ</span>
                                    </div>
                                    <div class="ml-4 flex-1">
                                        <p class="font-medium text-gray-900">John Smith</p>
                                        <p class="text-sm text-gray-600">Created 5 new folders</p>
                                    </div>
                                    <span class="text-xs text-gray-500">5 minutes ago</span>
                                </div>
                                
                                <div class="flex items-center p-4 hover:bg-gray-50 rounded-lg">
                                    <div class="w-10 h-10 bg-orange-100 rounded-full flex items-center justify-center">
                                        <span class="text-sm">‚ö†Ô∏è</span>
                                    </div>
                                    <div class="ml-4 flex-1">
                                        <p class="font-medium text-gray-900">Sarah Johnson</p>
                                        <p class="text-sm text-gray-600">Exceeded storage limit</p>
                                    </div>
                                    <span class="text-xs text-gray-500">10 minutes ago</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Users Section -->
                <div id="users-section" class="section hidden">
                    <div class="space-y-6">
                        <div class="bg-white rounded-xl shadow-sm border border-gray-100 p-6">
                            <h2 class="text-xl font-bold text-gray-900 mb-4">User Management</h2>
                            <div class="overflow-x-auto">
                                <table class="min-w-full">
                                    <thead class="bg-gray-50">
                                        <tr>
                                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">User</th>
                                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Plan</th>
                                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Status</th>
                                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Storage</th>
                                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Last Active</th>
                                        </tr>
                                    </thead>
                                    <tbody class="divide-y divide-gray-200">
                                        <tr class="hover:bg-gray-50">
                                            <td class="px-6 py-4 whitespace-nowrap">
                                                <div class="flex items-center">
                                                    <div class="w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center mr-3">
                                                        <span class="text-sm">M</span>
                                                    </div>
                                                    <div>
                                                        <div class="text-sm font-medium text-gray-900">Maria Garcia</div>
                                                        <div class="text-sm text-gray-500">maria@email.com</div>
                                                    </div>
                                                </div>
                                            </td>
                                            <td class="px-6 py-4 whitespace-nowrap">
                                                <span class="inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-purple-100 text-purple-800">Premium</span>
                                            </td>
                                            <td class="px-6 py-4 whitespace-nowrap">
                                                <span class="inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800">Active</span>
                                            </td>
                                            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">2.4GB / 15GB</td>
                                            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">2 hours ago</td>
                                        </tr>
                                        <tr class="hover:bg-gray-50">
                                            <td class="px-6 py-4 whitespace-nowrap">
                                                <div class="flex items-center">
                                                    <div class="w-8 h-8 bg-green-100 rounded-full flex items-center justify-center mr-3">
                                                        <span class="text-sm">J</span>
                                                    </div>
                                                    <div>
                                                        <div class="text-sm font-medium text-gray-900">John Smith</div>
                                                        <div class="text-sm text-gray-500">john@email.com</div>
                                                    </div>
                                                </div>
                                            </td>
                                            <td class="px-6 py-4 whitespace-nowrap">
                                                <span class="inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-blue-100 text-blue-800">Family</span>
                                            </td>
                                            <td class="px-6 py-4 whitespace-nowrap">
                                                <span class="inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800">Active</span>
                                            </td>
                                            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">8.7GB / 50GB</td>
                                            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">1 day ago</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Subscriptions Section -->
                <div id="subscriptions-section" class="section hidden">
                    <div class="space-y-6">
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                            <div class="bg-white rounded-xl shadow-sm border border-gray-100 p-6">
                                <h3 class="text-lg font-semibold text-gray-900">Free Plan</h3>
                                <p class="text-2xl font-bold text-gray-900 mt-2">7,708</p>
                                <p class="text-sm text-gray-600">subscribers</p>
                            </div>
                            <div class="bg-white rounded-xl shadow-sm border border-gray-100 p-6">
                                <h3 class="text-lg font-semibold text-gray-900">Premium Plan</h3>
                                <p class="text-2xl font-bold text-gray-900 mt-2">3,854</p>
                                <p class="text-sm text-gray-600">subscribers</p>
                            </div>
                            <div class="bg-white rounded-xl shadow-sm border border-gray-100 p-6">
                                <h3 class="text-lg font-semibold text-gray-900">Family Plan</h3>
                                <p class="text-2xl font-bold text-gray-900 mt-2">1,285</p>
                                <p class="text-sm text-gray-600">subscribers</p>
                            </div>
                        </div>
                        
                        <div class="bg-white rounded-xl shadow-sm border border-gray-100 p-6">
                            <h2 class="text-xl font-bold text-gray-900 mb-4">Revenue Overview</h2>
                            <canvas id="subscriptionChart" width="400" height="200"></canvas>
                        </div>
                    </div>
                </div>

                <!-- Analytics Section -->
                <div id="analytics-section" class="section hidden">
                    <div class="bg-white rounded-xl shadow-sm border border-gray-100 p-6">
                        <h2 class="text-xl font-bold text-gray-900 mb-4">Analytics Dashboard</h2>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>
                                <h3 class="text-lg font-semibold text-gray-900 mb-2">Daily Active Users</h3>
                                <canvas id="analyticsChart" width="400" height="200"></canvas>
                            </div>
                            <div>
                                <h3 class="text-lg font-semibold text-gray-900 mb-2">Feature Usage</h3>
                                <div class="space-y-3">
                                    <div class="flex justify-between items-center">
                                        <span class="text-gray-700">Photo Upload</span>
                                        <div class="flex items-center space-x-2">
                                            <div class="w-32 bg-gray-200 rounded-full h-2">
                                                <div class="bg-blue-600 h-2 rounded-full" style="width: 85%"></div>
                                            </div>
                                            <span class="text-sm text-gray-600">85%</span>
                                        </div>
                                    </div>
                                    <div class="flex justify-between items-center">
                                        <span class="text-gray-700">Folder Creation</span>
                                        <div class="flex items-center space-x-2">
                                            <div class="w-32 bg-gray-200 rounded-full h-2">
                                                <div class="bg-green-600 h-2 rounded-full" style="width: 72%"></div>
                                            </div>
                                            <span class="text-sm text-gray-600">72%</span>
                                        </div>
                                    </div>
                                    <div class="flex justify-between items-center">
                                        <span class="text-gray-700">Memory Sharing</span>
                                        <div class="flex items-center space-x-2">
                                            <div class="w-32 bg-gray-200 rounded-full h-2">
                                                <div class="bg-purple-600 h-2 rounded-full" style="width: 58%"></div>
                                            </div>
                                            <span class="text-sm text-gray-600">58%</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Storage Section -->
                <div id="storage-section" class="section hidden">
                    <div class="bg-white rounded-xl shadow-sm border border-gray-100 p-6">
                        <h2 class="text-xl font-bold text-gray-900 mb-4">Storage Management</h2>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>
                                <h3 class="text-lg font-semibold text-gray-900 mb-2">Total Storage Usage</h3>
                                <div class="mt-4">
                                    <div class="flex justify-between text-sm text-gray-600 mb-1">
                                        <span>850GB used of 1TB</span>
                                        <span>85%</span>
                                    </div>
                                    <div class="w-full bg-gray-200 rounded-full h-3">
                                        <div class="bg-orange-500 h-3 rounded-full" style="width: 85%"></div>
                                    </div>
                                </div>
                            </div>
                            <div>
                                <h3 class="text-lg font-semibold text-gray-900 mb-2">Storage by Type</h3>
                                <div class="space-y-2 mt-4">
                                    <div class="flex justify-between">
                                        <span class="text-gray-700">Photos</span>
                                        <span class="font-medium">550GB (65%)</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span class="text-gray-700">Videos</span>
                                        <span class="font-medium">210GB (25%)</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span class="text-gray-700">Documents</span>
                                        <span class="font-medium">90GB (10%)</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Support Section -->
                <div id="support-section" class="section hidden">
                    <div class="bg-white rounded-xl shadow-sm border border-gray-100 p-6">
                        <h2 class="text-xl font-bold text-gray-900 mb-4">Support Tickets</h2>
                        <div class="space-y-4">
                            <div class="border border-gray-200 rounded-lg p-4">
                                <div class="flex justify-between items-start">
                                    <div>
                                        <h4 class="font-semibold text-gray-900">Cannot upload photos</h4>
                                        <p class="text-sm text-gray-600 mt-1">User: maria@email.com</p>
                                        <p class="text-sm text-gray-500 mt-1">Opened: 2 hours ago</p>
                                    </div>
                                    <span class="px-2 py-1 text-xs font-semibold rounded-full bg-red-100 text-red-800">High Priority</span>
                                </div>
                            </div>
                            <div class="border border-gray-200 rounded-lg p-4">
                                <div class="flex justify-between items-start">
                                    <div>
                                        <h4 class="font-semibold text-gray-900">Billing question</h4>
                                        <p class="text-sm text-gray-600 mt-1">User: john@email.com</p>
                                        <p class="text-sm text-gray-500 mt-1">Opened: 1 day ago</p>
                                    </div>
                                    <span class="px-2 py-1 text-xs font-semibold rounded-full bg-yellow-100 text-yellow-800">Medium Priority</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Settings Section -->
                <div id="settings-section" class="section hidden">
                    <div class="bg-white rounded-xl shadow-sm border border-gray-100 p-6">
                        <h2 class="text-xl font-bold text-gray-900 mb-4">System Settings</h2>
                        <div class="space-y-6">
                            <div>
                                <h3 class="text-lg font-semibold text-gray-900 mb-2">General Settings</h3>
                                <div class="space-y-3">
                                    <div class="flex items-center justify-between">
                                        <span class="text-gray-700">Maintenance Mode</span>
                                        <button class="bg-gray-200 relative inline-flex h-6 w-11 items-center rounded-full">
                                            <span class="sr-only">Enable maintenance mode</span>
                                            <span class="translate-x-1 inline-block h-4 w-4 transform rounded-full bg-white transition"></span>
                                        </button>
                                    </div>
                                    <div class="flex items-center justify-between">
                                        <span class="text-gray-700">New User Registration</span>
                                        <button class="bg-blue-600 relative inline-flex h-6 w-11 items-center rounded-full">
                                            <span class="sr-only">Enable new user registration</span>
                                            <span class="translate-x-6 inline-block h-4 w-4 transform rounded-full bg-white transition"></span>
                                        </button>
                                    </div>
                                </div>
                            </div>
                            <div>
                                <h3 class="text-lg font-semibold text-gray-900 mb-2">Storage Limits</h3>
                                <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700">Free Plan</label>
                                        <input type="text" value="2GB" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700">Premium Plan</label>
                                        <input type="text" value="15GB" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700">Family Plan</label>
                                        <input type="text" value="50GB" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </main>
        </div>
    </div>

    <script>
        // Navigation functionality
        function showSection(sectionName) {
            // Hide all sections
            const sections = document.querySelectorAll('.section');
            sections.forEach(section => {
                section.classList.add('hidden');
            });

            // Show selected section
            document.getElementById(sectionName + '-section').classList.remove('hidden');
            
            // Update page title
            const titles = {
                'dashboard': 'Dashboard',
                'users': 'User Management',
                'subscriptions': 'Subscriptions',
                'analytics': 'Analytics',
                'storage': 'Storage Management',
                'support': 'Support',
                'settings': 'Settings'
            };
            document.getElementById('pageTitle').textContent = titles[sectionName];

            // Update active link
            const links = document.querySelectorAll('.sidebar-link');
            links.forEach(link => {
                link.classList.remove('active');
            });
            event.target.closest('.sidebar-link').classList.add('active');
        }

        // Chart initialization
        function initCharts() {
            // User Growth Chart
            const userGrowthCtx = document.getElementById('userGrowthChart').getContext('2d');
            new Chart(userGrowthCtx, {
                type: 'line',
                data: {
                    labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'],
                    datasets: [{
                        label: 'Users',
                        data: [8400, 9200, 10100, 11200, 11800, 12847],
                        borderColor: '#6366f1',
                        backgroundColor: 'rgba(99, 102, 241, 0.1)',
                        fill: true
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            display: false
                        }
                    }
                }
            });

            // Revenue Chart
            const revenueCtx = document.getElementById('revenueChart').getContext('2d');
            new Chart(revenueCtx, {
                type: 'bar',
                data: {
                    labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'],
                    datasets: [{
                        label: 'Revenue',
                        data: [32000, 35000, 38000, 42000, 44000, 45678],
                        backgroundColor: '#10b981'
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            display: false
                        }
                    }
                }
            });

            // Subscription Chart
            const subscriptionCtx = document.getElementById('subscriptionChart').getContext('2d');
            new Chart(subscriptionCtx, {
                type: 'doughnut',
                data: {
                    labels: ['Free', 'Premium', 'Family'],
                    datasets: [{
                        data: [7708, 3854, 1285],
                        backgroundColor: ['#94a3b8', '#6366f1', '#f59e0b']
                    }]
                },
                options: {
                    responsive: true
                }
            });

            // Analytics Chart
            const analyticsCtx = document.getElementById('analyticsChart').getContext('2d');
            new Chart(analyticsCtx, {
                type: 'line',
                data: {
                    labels: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'],
                    datasets: [{
                        label: 'Daily Active Users',
                        data: [3200, 3350, 3180, 3420, 3580, 3650, 3720],
                        borderColor: '#8b5cf6',
                        backgroundColor: 'rgba(139, 92, 246, 0.1)',
                        fill: true
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            display: false
                        }
                    }
                }
            });
        }

        // Initialize when page loads
        document.addEventListener('DOMContentLoaded', function() {
            // Hide loading screen and show main app
            setTimeout(() => {
                document.getElementById('loading-screen').style.display = 'none';
                document.getElementById('main-app').style.display = 'flex';
                initCharts();
                initPWA();
                initPerformanceOptimizations();
            }, 1000);
        });

        // PWA Installation
        function initPWA() {
            let deferredPrompt;
            
            window.addEventListener('beforeinstallprompt', (e) => {
                e.preventDefault();
                deferredPrompt = e;
                
                // Show install prompt
                const installPrompt = document.createElement('div');
                installPrompt.className = 'install-prompt';
                installPrompt.innerHTML = `
                    <div class="flex items-center space-x-3">
                        <span>Install Memory Box Admin</span>
                        <button onclick="installPWA()" class="bg-white text-purple-600 px-3 py-1 rounded text-sm font-medium">Install</button>
                        <button onclick="this.parentElement.parentElement.style.display='none'" class="text-purple-200">√ó</button>
                    </div>
                `;
                document.body.appendChild(installPrompt);
                installPrompt.style.display = 'block';
            });
            
            window.installPWA = () => {
                if (deferredPrompt) {
                    deferredPrompt.prompt();
                    deferredPrompt.userChoice.then((result) => {
                        if (result.outcome === 'accepted') {
                            console.log('PWA installed');
                        }
                        deferredPrompt = null;
                        document.querySelector('.install-prompt').style.display = 'none';
                    });
                }
            };
        }

        // Performance optimizations
        function initPerformanceOptimizations() {
            // Lazy load charts
            const chartObserver = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        const chartId = entry.target.id;
                        if (!entry.target.hasAttribute('data-loaded')) {
                            entry.target.setAttribute('data-loaded', 'true');
                            // Chart will be loaded when section becomes visible
                        }
                    }
                });
            });

            document.querySelectorAll('canvas').forEach(canvas => {
                chartObserver.observe(canvas);
            });

            // Optimize scroll performance
            let ticking = false;
            function updateOnScroll() {
                // Update any scroll-dependent elements
                ticking = false;
            }

            document.addEventListener('scroll', () => {
                if (!ticking) {
                    requestAnimationFrame(updateOnScroll);
                    ticking = true;
                }
            });
        }

        // Enhanced navigation with security checks
        function showSection(sectionName) {
            // Security check - validate section name
            const validSections = ['dashboard', 'users', 'subscriptions', 'analytics', 'storage', 'support', 'settings'];
            if (!validSections.includes(sectionName)) {
                console.warn('Invalid section requested:', sectionName);
                return;
            }

            // Hide all sections
            const sections = document.querySelectorAll('.section');
            sections.forEach(section => {
                section.classList.add('hidden');
            });

            // Show selected section
            const targetSection = document.getElementById(sectionName + '-section');
            if (targetSection) {
                targetSection.classList.remove('hidden');
                
                // Update page title
                const titles = {
                    'dashboard': 'Dashboard',
                    'users': 'User Management', 
                    'subscriptions': 'Subscriptions',
                    'analytics': 'Analytics',
                    'storage': 'Storage Management',
                    'support': 'Support',
                    'settings': 'Settings'
                };
                
                document.getElementById('pageTitle').textContent = titles[sectionName];
                document.title = `${titles[sectionName]} - Memory Box Admin`;

                // Update active link
                const links = document.querySelectorAll('.sidebar-link');
                links.forEach(link => {
                    link.classList.remove('active');
                });
                
                if (event && event.target) {
                    const clickedLink = event.target.closest('.sidebar-link');
                    if (clickedLink) {
                        clickedLink.classList.add('active');
                    }
                }

                // Load section-specific data
                loadSectionData(sectionName);
            }
        }

        // Load data for specific sections
        function loadSectionData(sectionName) {
            switch(sectionName) {
                case 'analytics':
                    initAnalyticsCharts();
                    break;
                case 'subscriptions':
                    initSubscriptionChart();
                    break;
                case 'users':
                    loadUserData();
                    break;
                case 'storage':
                    updateStorageMetrics();
                    break;
            }
        }

        // Chart initialization with error handling
        function initCharts() {
            try {
                initDashboardCharts();
            } catch (error) {
                console.error('Error initializing charts:', error);
                // Fallback to showing static data
                showChartError();
            }
        }

        function initDashboardCharts() {
            // User Growth Chart
            const userGrowthCtx = document.getElementById('userGrowthChart')?.getContext('2d');
            if (userGrowthCtx) {
                new Chart(userGrowthCtx, {
                    type: 'line',
                    data: {
                        labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'],
                        datasets: [{
                            label: 'Users',
                            data: [8400, 9200, 10100, 11200, 11800, 12847],
                            borderColor: '#6366f1',
                            backgroundColor: 'rgba(99, 102, 241, 0.1)',
                            fill: true,
                            tension: 0.4
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: { display: false }
                        },
                        scales: {
                            y: { beginAtZero: true }
                        }
                    }
                });
            }

            // Revenue Chart
            const revenueCtx = document.getElementById('revenueChart')?.getContext('2d');
            if (revenueCtx) {
                new Chart(revenueCtx, {
                    type: 'bar',
                    data: {
                        labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'],
                        datasets: [{
                            label: 'Revenue',
                            data: [32000, 35000, 38000, 42000, 44000, 45678],
                            backgroundColor: '#10b981',
                            borderRadius: 6
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: { display: false }
                        },
                        scales: {
                            y: { beginAtZero: true }
                        }
                    }
                });
            }
        }

        function initSubscriptionChart() {
            const subscriptionCtx = document.getElementById('subscriptionChart')?.getContext('2d');
            if (subscriptionCtx) {
                new Chart(subscriptionCtx, {
                    type: 'doughnut',
                    data: {
                        labels: ['Free', 'Premium', 'Family'],
                        datasets: [{
                            data: [7708, 3854, 1285],
                            backgroundColor: ['#94a3b8', '#6366f1', '#f59e0b'],
                            borderWidth: 0
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false
                    }
                });
            }
        }

        function initAnalyticsCharts() {
            const analyticsCtx = document.getElementById('analyticsChart')?.getContext('2d');
            if (analyticsCtx) {
                new Chart(analyticsCtx, {
                    type: 'line',
                    data: {
                        labels: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'],
                        datasets: [{
                            label: 'Daily Active Users',
                            data: [3200, 3350, 3180, 3420, 3580, 3650, 3720],
                            borderColor: '#8b5cf6',
                            backgroundColor: 'rgba(139, 92, 246, 0.1)',
                            fill: true,
                            tension: 0.4
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: { display: false }
                        }
                    }
                });
            }
        }

        function showChartError() {
            const charts = document.querySelectorAll('canvas');
            charts.forEach(chart => {
                const container = chart.parentElement;
                container.innerHTML = `
                    <div class="flex items-center justify-center h-48 text-gray-500">
                        <div class="text-center">
                            <div class="text-2xl mb-2">üìä</div>
                            <p>Chart data unavailable</p>
                        </div>
                    </div>
                `;
            });
        }

        // Enhanced security and error handling
        function loadUserData() {
            // Simulate loading user data with security checks
            console.log('Loading user data with proper authentication...');
        }

        function updateStorageMetrics() {
            // Update storage usage with real-time data
            console.log('Updating storage metrics...');
        }

        // Global error handler
        window.addEventListener('error', (event) => {
            console.error('Global error:', event.error);
            // In production, send to error reporting service
        });

        // Unhandled promise rejection handler
        window.addEventListener('unhandledrejection', (event) => {
            console.error('Unhandled promise rejection:', event.reason);
            event.preventDefault();
        });

        // Add logo animation
        document.addEventListener('DOMContentLoaded', function() {
            const logo = document.querySelector('.animated-logo');
            if (logo) {
                logo.addEventListener('click', function() {
                    this.style.transform = 'scale(0.9)';
                    setTimeout(() => {
                        this.style.transform = 'scale(1)';
                    }, 150);
                });
            }
        });

        // Responsive sidebar for mobile
        function toggleMobileSidebar() {
            const sidebar = document.querySelector('.w-64');
            sidebar.classList.toggle('hidden');
        }

        // Add mobile menu button for responsive design
        if (window.innerWidth < 768) {
            const header = document.querySelector('header .flex');
            const mobileMenuBtn = document.createElement('button');
            mobileMenuBtn.innerHTML = '‚ò∞';
            mobileMenuBtn.className = 'md:hidden text-gray-600 text-xl p-2';
            mobileMenuBtn.onclick = toggleMobileSidebar;
            header.insertBefore(mobileMenuBtn, header.firstChild);
        }
    </script>

    <!-- Service Worker Registration -->
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/sw.js')
                    .then(registration => {
                        console.log('SW registered: ', registration);
                    })
                    .catch(registrationError => {
                        console.log('SW registration failed: ', registrationError);
                    });
            });
        }
    </script>
</body>
</html>
